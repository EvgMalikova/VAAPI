The basics of A\+PI use and main concept that is much simillar to \href{http://vtk.org}{\texttt{ Visualisation Toolkit}}. V\+TK is defacto a standard for general proglems of visual analysis solving. It\textquotesingle{}s integration with V\+T\+K-\/m provides other dimension to the A\+PI efficient computation and integration with simulation software.

The proposed Visual-\/auditory A\+PI targets multisensory interaction problem, unified on base of ray-\/casting. It is first of all is a research project that targets to explore a unified approach to multisensory feedback on base of ray-\/casting procedure. Similarity to V\+TK syntacsis targets to provide user and potential further developers easy entry access to A\+PI and of course the author is quite familiar with V\+TK and that\textquotesingle{}s why providing similar sintacsis in A\+PI seemed to him quite logical. The main target of the proposed A\+PI\+: provide a base for further Multisensory interfaces development on base of Ray-\/casting procedure.

The core of the V\+TK is a visualisation pipeline of data, that starts from data source and ends up with image rendered on screen.

Below are basic similarities and differences with V\+TK in the main concept The basic classes of V\+TK A\+PI are\+:
\begin{DoxyItemize}
\item Sources
\item Filters
\item Mappers
\item Actors
\item Renderers
\item Interactors
\item Windows
\end{DoxyItemize}

The proposed solution targets visual-\/auditory ray-\/casting of scalar fields. We believe that for this type of data, there is no need to reimplement a large \char`\"{}filtering\char`\"{} part in visualisation pipeline of V\+TK. The most of scalar fields data preprecessing tasks are already addressed with Image Processing tookit \href{http::itk.org}{\texttt{ I\+TK}}. As a result the A\+PI mainly provides only targets mapping and rendering tasts and suggests some data reading and preprocessing procedures can be implemented on base of I\+TK or from scratch.

The Visual-\/auditory A\+PI implements basic Mappers, Actors, Renderers and Windows that are intended to support ray-\/casting of mainly Signed Distance Fields, althought triangulated geometry is also supported and can be integrated within pipeline. Similarly to V\+TK the pipeline is constructed through \char`\"{}input-\/output\char`\"{} concept. The scalar field data is provided by file Readers that eighter output structured data or directly create Optix Buffers and Texture\+Samplers on G\+PU. The inputs and outputs are usually Optix objects, like optix\+::\+Geometry, optix\+::\+Material, optix\+::\+Geometry\+Instance and etc.. As all this objects are created through optix\+::\+Context, the reference to it is given to each class. For context creation a Context\+Manager class is responsible.\hypertarget{md_core_src_doc_vtkstyle_autotoc_md15}{}\doxysection{Data readers and S\+D\+F geometry creation}\label{md_core_src_doc_vtkstyle_autotoc_md15}
In the example below, the Reader that reads molecular data described in \href{http://wiki.jmol.org/index.php/File_formats/Formats/XYZ}{\texttt{ X\+YZ file format}} and transfers it to \char`\"{}ball\char`\"{} like representation, when atoms represented as spheres (balls). This is current version of \href{https://en.wikipedia.org/wiki/Space-filling_model}{\texttt{ C\+PK molecule representation}}. For info on \href{https://en.wikipedia.org/wiki/Jmol}{\texttt{ molecule representation types}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classcontext_manager}{contextManager}} m; }
\DoxyCodeLine{m.\mbox{\hyperlink{classcontext_manager_a1869e0c5243226f512d672d99763777e}{Update}}();\textcolor{comment}{//creates context}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classxyz_reader}{xyzReader}} read;  \textcolor{comment}{//reads data}}
\DoxyCodeLine{read.Setfile(\textcolor{stringliteral}{"molecule.xyz"});}
\DoxyCodeLine{read.\mbox{\hyperlink{classoptix_reader_aede6a13fd818d3d3d39b9d1f122394d1}{Update}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classsdf_c_p_k_mol}{sdfCPKMol}} mol;  \textcolor{comment}{//}}
\DoxyCodeLine{mol.\mbox{\hyperlink{classoptix_s_d_f_geometry_a63249e61355407ec0d41d59d05e1838c}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{mol.\mbox{\hyperlink{classsdf_c_p_k_mol_a58dd4c76159371ce3938f2bf4ab05e16}{SetCenter}}(read.\mbox{\hyperlink{classxyz_reader_a582c58be04448e3bd9d5e5b5d7701abc}{GetOutput1}}()); \textcolor{comment}{//centers, data stored in std::vector}}
\DoxyCodeLine{mol.SetTypes(read.\mbox{\hyperlink{classxyz_reader_a8f48dea0d24d983dc42d3cde36016abc}{GetOutput2}}()); \textcolor{comment}{//set types of atoms, data stored in std::vector}}
\DoxyCodeLine{mol.\mbox{\hyperlink{classoptix_s_d_f_geometry_af188ac95c6207906101f844d47217ec8}{SetMaterialType}}(0); }
\DoxyCodeLine{mol.\mbox{\hyperlink{classoptix_s_d_f_geometry_af866243d89ffb3ed211d8e8408ee859b}{Update}}();}
\end{DoxyCode}


The other example is reading dynamic scalar data, that represents . Gamess files. The reader performs signed distance transform of data on base of \href{http://itk.org}{\texttt{ Image Processing Toolkit}}. It generates optix Buffers and Textures Samplers. The optix\+S\+D\+F\+Texture gets Texture Samplers describing initial and final states of molecule dynamic electron density field and forms dynamic S\+DF geometry object. 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classcontext_manager}{contextManager}} m;}
\DoxyCodeLine{m.\mbox{\hyperlink{classcontext_manager_a1869e0c5243226f512d672d99763777e}{Update}}();\textcolor{comment}{//creates context}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classsdf_texture_reader}{sdfTextureReader<float>}} readSDFTex1;}
\DoxyCodeLine{readSDFTex1.\mbox{\hyperlink{classtex_reader_af6e08e80678f006effcb6a2bf0de9bac}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{readSDFTex1.\mbox{\hyperlink{classtex_reader_a7439702c99e2037d9c204941b3943ce2}{SetSize}}(139, 150, 160); \textcolor{comment}{//data dimensions}}
\DoxyCodeLine{}
\DoxyCodeLine{readSDFTex1.\mbox{\hyperlink{classsdf_texture_reader_acf968f12553363600c0cf306f8e8d45f}{SetThreshold}}(0.1); \textcolor{comment}{//isolevel of scalar field}}
\DoxyCodeLine{readSDFTex1.Setfile(\textcolor{stringliteral}{"ed1.txt"});}
\DoxyCodeLine{readSDFTex1.\mbox{\hyperlink{classoptix_reader_aede6a13fd818d3d3d39b9d1f122394d1}{Update}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classsdf_texture_reader}{sdfTextureReader<float>}} readSDFTex2;}
\DoxyCodeLine{readSDFTex2.\mbox{\hyperlink{classtex_reader_af6e08e80678f006effcb6a2bf0de9bac}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{readSDFTex2.\mbox{\hyperlink{classtex_reader_a7439702c99e2037d9c204941b3943ce2}{SetSize}}(138, 150, 160);}
\DoxyCodeLine{}
\DoxyCodeLine{readSDFTex2.\mbox{\hyperlink{classsdf_texture_reader_acf968f12553363600c0cf306f8e8d45f}{SetThreshold}}(0.1);}
\DoxyCodeLine{readSDFTex2.Setfile(\textcolor{stringliteral}{"ed2.txt"});}
\DoxyCodeLine{readSDFTex2.\mbox{\hyperlink{classoptix_reader_aede6a13fd818d3d3d39b9d1f122394d1}{Update}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classsdf_texture}{sdfTexture}} tex; \textcolor{comment}{//dynamic SDF object creation}}
\DoxyCodeLine{tex.\mbox{\hyperlink{classoptix_s_d_f_geometry_a63249e61355407ec0d41d59d05e1838c}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{tex.\mbox{\hyperlink{classsdf_texture_acf500b78fc2c909fbcf299cf6cec6eff}{SetTexture}}(readSDFTex1.\mbox{\hyperlink{classtex_reader_add4bc13d89aac2937792703f1e213534}{GetTexture}}(), readSDFTex1.\mbox{\hyperlink{classsdf_texture_reader_a0da1cc5f98f9ef9870ec3d2e0cccab9b}{GetParam}}());}
\DoxyCodeLine{tex.\mbox{\hyperlink{classsdf_texture_acf500b78fc2c909fbcf299cf6cec6eff}{SetTexture}}(readSDFTex2.\mbox{\hyperlink{classtex_reader_add4bc13d89aac2937792703f1e213534}{GetTexture}}(), readSDFTex1.\mbox{\hyperlink{classsdf_texture_reader_a0da1cc5f98f9ef9870ec3d2e0cccab9b}{GetParam}}());}
\DoxyCodeLine{tex.\mbox{\hyperlink{classoptix_s_d_f_geometry_af866243d89ffb3ed211d8e8408ee859b}{Update}}();}
\end{DoxyCode}
\hypertarget{md_core_src_doc_vtkstyle_autotoc_md16}{}\doxysection{Mapper, Actor, Renderer}\label{md_core_src_doc_vtkstyle_autotoc_md16}
Mapper, Actor and Renderer classes are much simillar to V\+TK in concept and syntacsis. The Mapper applies a material to the objects (in current implementation with optical or auditory properties). The Mapper is can activate optical or auditory material, depending on type of rendering procedure\+: rendering optical or auditory properties. For this, in current implementation the Mapper receives optix\+::\+Material from Material class (material.\+Get\+Output() procedure ) and description of it\textquotesingle{}s properties in , material.\+Get\+Type() procedure.

The Renderer is responsible for rendering visual and auditory properties. Whether optical or auditory properties should be rendered, the Renderer operates its actors to activate the necessary visual or auditory model for all created pipelines of data.

Below the code demonstrating the above concepts and syntacsis of Mapper, Actor and Renderer classes basic usage. 
\begin{DoxyCode}{0}
\DoxyCodeLine{vaMaterial mSdf;}
\DoxyCodeLine{mSdf.SetContext(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{mSdf.Update();}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classva_mapper}{vaMapper}} map21;}
\DoxyCodeLine{map21.\mbox{\hyperlink{classva_basic_object_a084579231006f44f03b6834e723316b6}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{map21.\mbox{\hyperlink{classva_mapper_a778f09202a3f15a52170f3ad433612f8}{SetInput}}(sdf.GetOutput());}
\DoxyCodeLine{map21.\mbox{\hyperlink{classva_mapper_aea3ef068acdb6b1b86f7b5ff8b8e38e2}{AddMaterial}}(mSdf.GetOutput(), mSdf.GetType());}
\DoxyCodeLine{map21.\mbox{\hyperlink{classva_mapper_a840064e5c0c1af154d46cdd9ec4f19ca}{Update}}();}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{classva_actor}{vaActor}} acSdf1;}
\DoxyCodeLine{acSdf1.\mbox{\hyperlink{classoptix_basic_actor_a3380d4c2063c0901bf25a1ed05712a16}{SetContext}}(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{acSdf1.\mbox{\hyperlink{classoptix_basic_actor_a68ed9c6a2f966b8a42b71bb8f79ae46e}{AddMapper}}(\&map21);}
\DoxyCodeLine{acSdf1.\mbox{\hyperlink{classoptix_basic_actor_afa46b76f029abca941b2d80c46422fef}{Update}}();}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.AddActor(\&acSdf1);}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{....}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.LaunchAuditoryContext(); \textcolor{comment}{//compute auditory ray-\/tracing}}
\DoxyCodeLine{}
\DoxyCodeLine{...}
\DoxyCodeLine{ren.LaunchOpticContext();\textcolor{comment}{// compute optical ray-\/tracing}}
\end{DoxyCode}
\hypertarget{md_core_src_doc_vtkstyle_autotoc_md17}{}\doxysection{G\+U\+I  and interaction}\label{md_core_src_doc_vtkstyle_autotoc_md17}
The G\+UI procedures are implemented on base of \href{https://github.com/glfw/glfw}{\texttt{ G\+L\+FW}} and \href{https://github.com/ocornut/imgui}{\texttt{ Im\+G\+UI}} libraries. A custom G\+UI can be easily implemented on base of those libraries and integrated to A\+PI pipeline.

The A\+PI provides a basic Renderer, G\+L\+FW window and Interactor. As far the basic class of \mbox{\hyperlink{class_pinhole_camera}{Pinhole\+Camera}} from N\+V\+I\+D\+IA O\+P\+T\+IX A\+D\+V\+A\+N\+C\+ED examples was used to render data\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classcontext_manager}{contextManager}} m;}
\DoxyCodeLine{m.\mbox{\hyperlink{classcontext_manager_a1869e0c5243226f512d672d99763777e}{Update}}();\textcolor{comment}{//creates context}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{class_pinhole_camera}{PinholeCamera}} pinholeCamera;  \textcolor{comment}{//basic camera}}
\DoxyCodeLine{}
\DoxyCodeLine{optixRenderer \mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}};}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetValid(m.\mbox{\hyperlink{classcontext_manager_a0dbbb59c7488d5bf68f437d1b4a11967}{GetValid}}());}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetContext(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}());}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetOpticalDims(windowWidth, windowWidth);}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetCamera(\&pinholeCamera);}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//set not dynamic}}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetDynamic(\textcolor{keyword}{false});}
\DoxyCodeLine{\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}}.SetAuditory(\textcolor{keyword}{false});}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//window procedure}}
\DoxyCodeLine{}
\DoxyCodeLine{vaWindow optixWindowProc; }
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{optixWindowProc.SetDim(windowWidth, windowHeight);}
\DoxyCodeLine{optixWindowProc.SetRenderer(\&\mbox{\hyperlink{volume_render__copy__comment_8cpp_a98cbcdf9071f62ea4c45bdcd33324b47}{ren}});}
\DoxyCodeLine{optixWindowProc.SetContext(m.\mbox{\hyperlink{classcontext_manager_a952b95215eb2a19410bc1da46edc9a06}{GetOutput}}()); \textcolor{comment}{//returns context}}
\DoxyCodeLine{optixWindowProc.SetCamera(\&pinholeCamera);}
\DoxyCodeLine{}
\DoxyCodeLine{vaRenderWindowInteractor iren; \textcolor{comment}{//TODO always check that basic still works}}
\DoxyCodeLine{iren.SetWindow(\&optixWindowProc);}
\end{DoxyCode}
 